TOPDIR = ../..
SRCDIR = $(TOPDIR)/src

DEFS = @DEFS@
CFLAGS = $(DEFS) -g -O2 -I. -I$(SRCDIR) -I$(TOPDIR)/gc -I$(TOPDIR)/gc/include

prefix = @prefix@
exec_prefix = @exec_prefix@

SUBHEADER_INSTALL_DIR = @includedir@/gauche
LIB_INSTALL_DIR = @libdir@
BIN_INSTALL_DIR = @bindir@
SCM_INSTALL_DIR = @libdir@/gauche/@GAUCHE_VERSION@/lib

INSTALL_HEADERS = uvector.h
INSTALL_SO = libuvector.so

GENERATED = uvector.h uvector.c uvlib.c 

INSTALL = @INSTALL@

OBJS = s8vector.o s16vector.o s32vector.o s64vector.o \
       u8vector.o u16vector.o u32vector.o u64vector.o \
       f32vector.o f64vector.o uvector.o uvlib.o

$(OBJS) : uvector.h

uvector.h : uvector.h.sh
	rm -rf uvector.h
	./uvector.h.sh > uvector.h

uvector.c : uvector.c.sh
	rm -rf uvector.c
	./uvector.c.sh > uvector.c

uvlib.c : uvlib.stub
	snow $(SRCDIR)/genstub uvlib.stub

clean :
	rm -rf libuvector.so core *.o *~

distclean: clean
	rm -rf Makefile

realclean: clean
	rm -rf $(GENERATED) Makefile


